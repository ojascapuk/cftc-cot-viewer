/* These define the structures returned from the Socrata API for Commitment of Traders reports.
** The APIs return arrays of objects that look like the the interfaces defined here.
** For more info and for reference:
** Traders in Financial Futures: https://dev.socrata.com/foundry/publicreporting.cftc.gov/gpe5-46if
** Disaggregated reports (agriculture and natural resources): https://dev.socrata.com/foundry/publicreporting.cftc.gov/72hh-3qpy
** Legacy reports: https://dev.socrata.com/foundry/publicreporting.cftc.gov/6dca-aqww
**/

export type IAnyCOTReportType = IFinancialFuturesCOTReport | IDisaggregatedFuturesCOTReport | ILegacyFuturesCOTReport;

export interface ISocrataCOTReport {
    id: string,
    market_and_exchange_names: string,
    report_date_as_yyyy_mm_dd: string,
    yyyy_report_week_ww: string,
    contract_market_name: string,
    cftc_contract_market_code: string,
    cftc_market_code: string,
    cftc_region_code: string,
    cftc_commodity_code: string,
    commodity_name: string,
    // the rest of these entries are listed at the bottom of page
    // https://dev.socrata.com/foundry/publicreporting.cftc.gov/gpe5-46if
    contract_units: string,
    cftc_subgroup_code: string,
    commodity: string,
    commodity_subgroup_name: string,
    commodity_group_name: string,
    futonly_or_combined: string,

    // fields added by this program in postprocessing
    timestamp: number, // UNIX epoch (millis) representation of `'report_date_as_yyyy_mm_dd'`
    dinosaur?: boolean, // if present and `true`, indicates that this week's record is the oldest available
};

export interface IFinancialFuturesCOTReport extends ISocrataCOTReport {
    open_interest_all: number,
    dealer_positions_long_all: number,
    dealer_positions_short_all: number
    dealer_positions_spread_all: number
    asset_mgr_positions_long: number
    asset_mgr_positions_short: number
    asset_mgr_positions_spread: number
    lev_money_positions_long: number
    lev_money_positions_short: number
    lev_money_positions_spread: number
    other_rept_positions_long: number
    other_rept_positions_short: number
    other_rept_positions_spread: number
    tot_rept_positions_long_all: number
    tot_rept_positions_short: number
    nonrept_positions_long_all: number
    nonrept_positions_short_all: number
    change_in_open_interest_all: number
    change_in_dealer_long_all: number
    change_in_dealer_short_all: number,
    change_in_dealer_spread_all: number,
    change_in_asset_mgr_long: number,
    change_in_asset_mgr_short: number,
    change_in_asset_mgr_spread: number,
    change_in_lev_money_long: number,
    change_in_lev_money_short: number,
    change_in_lev_money_spread: number,
    change_in_other_rept_long: number,
    change_in_other_rept_short: number,
    change_in_other_rept_spread: number,
    change_in_tot_rept_long_all: number,
    change_in_tot_rept_short: number,
    change_in_nonrept_long_all: number,
    change_in_nonrept_short_all: number,
    pct_of_open_interest_all: number,
    pct_of_oi_dealer_long_all: number,
    pct_of_oi_dealer_short_all: number,
    pct_of_oi_dealer_spread_all: number,
    pct_of_oi_asset_mgr_long: number,
    pct_of_oi_asset_mgr_short: number,
    pct_of_oi_asset_mgr_spread: number,
    pct_of_oi_lev_money_long: number,
    pct_of_oi_lev_money_short: number,
    pct_of_oi_lev_money_spread: number,
    pct_of_oi_other_rept_long: number,
    pct_of_oi_other_rept_short: number,
    pct_of_oi_other_rept_spread: number,
    pct_of_oi_tot_rept_long_all: number,
    pct_of_oi_tot_rept_short: number,
    pct_of_oi_nonrept_long_all: number,
    pct_of_oi_nonrept_short_all: number,
    traders_tot_all: number,
    traders_dealer_long_all: number,
    traders_dealer_short_all: number,
    traders_dealer_spread_all: number,
    traders_asset_mgr_long_all: number,
    traders_asset_mgr_short_all: number,
    traders_asset_mgr_spread: number,
    traders_lev_money_long_all: number,
    traders_lev_money_short_all: number,
    traders_lev_money_spread: number,
    traders_other_rept_long_all: number,
    traders_other_rept_short: number,
    traders_other_rept_spread: number,
    traders_tot_rept_long_all: number,
    traders_tot_rept_short_all: number,
    conc_gross_le_4_tdr_long: number,
    conc_gross_le_4_tdr_short: number,
    conc_gross_le_8_tdr_long: number,
    conc_gross_le_8_tdr_short: number,
    conc_net_le_4_tdr_long_all: number,
    conc_net_le_4_tdr_short_all: number,
    conc_net_le_8_tdr_long_all: number,
    conc_net_le_8_tdr_short_all: number,
};

export interface IDisaggregatedFuturesCOTReport extends ISocrataCOTReport {
    open_interest_all: number,
    prod_merc_positions_long: number,
    prod_merc_positions_short: number,
    swap_positions_long_all: number,
    swap__positions_short_all: number,
    swap__positions_spread_all: number,
    m_money_positions_long_all: number,
    m_money_positions_short_all: number,
    m_money_positions_spread: number,
    other_rept_positions_long: number,
    other_rept_positions_short: number,
    other_rept_positions_spread: number,
    tot_rept_positions_long_all: number,
    tot_rept_positions_short: number,
    nonrept_positions_long_all: number,
    nonrept_positions_short_all: number,
    open_interest_old: number,
    prod_merc_positions_long_1: number,
    prod_merc_positions_short_1: number,
    swap_positions_long_old: number,
    swap__positions_short_old: number,
    swap__positions_spread_old: number,
    m_money_positions_long_old: number,
    m_money_positions_short_old: number,
    m_money_positions_spread_1: number,
    other_rept_positions_long_1: number,
    other_rept_positions_short_1: number,
    other_rept_positions_spread_1: number,
    tot_rept_positions_long_old: number,
    tot_rept_positions_short_1: number,
    nonrept_positions_long_old: number,
    nonrept_positions_short_old: number,
    open_interest_other: number,
    prod_merc_positions_long_2: number,
    prod_merc_positions_short_2: number,
    swap_positions_long_other: number,
    swap__positions_short_other: number,
    swap__positions_spread_other: number,
    m_money_positions_long_other: number,
    m_money_positions_short_other: number,
    m_money_positions_spread_2: number,
    other_rept_positions_long_2: number,
    other_rept_positions_short_2: number,
    other_rept_positions_spread_2: number,
    tot_rept_positions_long_other: number,
    tot_rept_positions_short_2: number,
    nonrept_positions_long_other: number,
    nonrept_positions_short_other: number,
    change_in_open_interest_all: number,
    change_in_prod_merc_long: number,
    change_in_prod_merc_short: number,
    change_in_swap_long_all: number,
    change_in_swap_short_all: number,
    change_in_swap_spread_all: number,
    change_in_m_money_long_all: number,
    change_in_m_money_short_all: number,
    change_in_m_money_spread: number,
    change_in_other_rept_long: number,
    change_in_other_rept_short: number,
    change_in_other_rept_spread: number,
    change_in_tot_rept_long_all: number,
    change_in_tot_rept_short: number,
    change_in_nonrept_long_all: number,
    change_in_nonrept_short_all: number,
    pct_of_open_interest_all: number,
    pct_of_oi_prod_merc_long: number,
    pct_of_oi_prod_merc_short: number,
    pct_of_oi_swap_long_all: number,
    pct_of_oi_swap_short_all: number,
    pct_of_oi_swap_spread_all: number,
    pct_of_oi_m_money_long_all: number,
    pct_of_oi_m_money_short_all: number,
    pct_of_oi_m_money_spread: number,
    pct_of_oi_other_rept_long: number,
    pct_of_oi_other_rept_short: number,
    pct_of_oi_other_rept_spread: number,
    pct_of_oi_tot_rept_long_all: number,
    pct_of_oi_tot_rept_short: number,
    pct_of_oi_nonrept_long_all: number,
    pct_of_oi_nonrept_short_all: number,
    pct_of_open_interest_old: number,
    pct_of_oi_prod_merc_long_1: number,
    pct_of_oi_prod_merc_short_1: number,
    pct_of_oi_swap_long_old: number,
    pct_of_oi_swap_short_old: number,
    pct_of_oi_swap_spread_old: number,
    pct_of_oi_m_money_long_old: number,
    pct_of_oi_m_money_short_old: number,
    pct_of_oi_m_money_spread_1: number,
    pct_of_oi_other_rept_long_1: number,
    pct_of_oi_other_rept_short_1: number,
    pct_of_oi_other_rept_spread_1: number,
    pct_of_oi_tot_rept_long_old: number,
    pct_of_oi_tot_rept_short_1: number,
    pct_of_oi_nonrept_long_old: number,
    pct_of_oi_nonrept_short_old: number,
    pct_of_open_interest_other: number,
    pct_of_oi_prod_merc_long_2: number,
    pct_of_oi_prod_merc_short_2: number,
    pct_of_oi_swap_long_other: number,
    pct_of_oi_swap_short_other: number,
    pct_of_oi_swap_spread_other: number,
    pct_of_oi_m_money_long_other: number,
    pct_of_oi_m_money_short_other: number,
    pct_of_oi_m_money_spread_2: number,
    pct_of_oi_other_rept_long_2: number,
    pct_of_oi_other_rept_short_2: number,
    pct_of_oi_other_rept_spread_2: number,
    pct_of_oi_tot_rept_long_other: number,
    pct_of_oi_tot_rept_short_2: number,
    pct_of_oi_nonrept_long_other: number,
    pct_of_oi_nonrept_short_other: number,
    traders_tot_all: number,
    traders_prod_merc_long_all: number,
    traders_prod_merc_short_all: number,
    traders_swap_spread_all: number,
    traders_m_money_short_all: number,
    traders_m_money_spread_all: number,
    traders_other_rept_long_all: number,
    traders_other_rept_short: number,
    traders_other_rept_spread: number,
    traders_tot_rept_long_all: number,
    traders_tot_rept_short_all: number,
    traders_tot_old: number,
    traders_prod_merc_long_old: number,
    traders_prod_merc_short_old: number,
    traders_swap_spread_old: number,
    traders_m_money_short_old: number,
    traders_m_money_spread_old: number,
    traders_other_rept_long_old: number,
    traders_other_rept_short_1: number,
    traders_other_rept_spread_1: number,
    traders_tot_rept_long_old: number,
    traders_tot_rept_short_old: number,
    traders_tot_other: number,
    traders_prod_merc_long_other: number,
    traders_prod_merc_short_other: number,
    traders_swap_long_other: number,
    traders_swap_short_other: number,
    traders_swap_spread_other: number,
    traders_m_money_long_other: number,
    traders_m_money_short_other: number,
    traders_m_money_spread_other: number,
    traders_other_rept_long_other: number,
    traders_other_rept_short_2: number,
    traders_other_rept_spread_2: number,
    traders_tot_rept_long_other: number,
    traders_tot_rept_short_other: number,
    conc_gross_le_4_tdr_long: number,
    conc_gross_le_4_tdr_short: number,
    conc_gross_le_8_tdr_long: number,
    conc_gross_le_8_tdr_short: number,
    conc_net_le_4_tdr_long_all: number,
    conc_net_le_4_tdr_short_all: number,
    conc_net_le_8_tdr_long_all: number,
    conc_net_le_8_tdr_short_all: number,
    conc_gross_le_4_tdr_long_1: number,
    conc_gross_le_4_tdr_short_1: number,
    conc_gross_le_8_tdr_long_1: number,
    conc_gross_le_8_tdr_short_1: number,
    conc_net_le_4_tdr_long_old: number,
    conc_net_le_4_tdr_short_old: number,
    conc_net_le_8_tdr_long_old: number,
    conc_net_le_8_tdr_short_old: number,
    conc_gross_le_4_tdr_long_2: number,
    conc_gross_le_4_tdr_short_2: number,
    conc_gross_le_8_tdr_long_2: number,
    conc_gross_le_8_tdr_short_2: number,
    conc_net_le_4_tdr_long_other: number,
    conc_net_le_4_tdr_short_other: number,
    conc_net_le_8_tdr_long_other: number,
    conc_net_le_8_tdr_short_other: number,
};

export interface ILegacyFuturesCOTReport extends ISocrataCOTReport {
    open_interest_all: number,
    noncomm_positions_long_all: number,
    noncomm_positions_short_all: number,
    noncomm_postions_spread_all: number,
    comm_positions_long_all: number,
    comm_positions_short_all: number,
    tot_rept_positions_long_all: number,
    tot_rept_positions_short: number,
    nonrept_positions_long_all: number,
    nonrept_positions_short_all: number,
    open_interest_old: number,
    noncomm_positions_long_old: number,
    noncomm_positions_short_old: number,
    noncomm_positions_spread: number,
    comm_positions_long_old: number,
    comm_positions_short_old: number,
    tot_rept_positions_long_old: number,
    tot_rept_positions_short_1: number,
    nonrept_positions_long_old: number,
    nonrept_positions_short_old: number,
    open_interest_other: number,
    noncomm_positions_long_other: number,
    noncomm_positions_short_other: number,
    noncomm_positions_spread_1: number,
    comm_positions_long_other: number,
    comm_positions_short_other: number,
    tot_rept_positions_long_other: number,
    tot_rept_positions_short_2: number,
    nonrept_positions_long_other: number,
    nonrept_positions_short_other: number,
    change_in_open_interest_all: number,
    change_in_noncomm_long_all: number,
    change_in_noncomm_short_all: number,
    change_in_noncomm_spead_all: number,
    change_in_comm_long_all: number,
    change_in_comm_short_all: number,
    change_in_tot_rept_long_all: number,
    change_in_tot_rept_short: number,
    change_in_nonrept_long_all: number,
    change_in_nonrept_short_all: number,
    pct_of_open_interest_all: number,
    pct_of_oi_noncomm_long_all: number,
    pct_of_oi_noncomm_short_all: number,
    pct_of_oi_noncomm_spread: number,
    pct_of_oi_comm_long_all: number,
    pct_of_oi_comm_short_all: number,
    pct_of_oi_tot_rept_long_all: number,
    pct_of_oi_tot_rept_short: number,
    pct_of_oi_nonrept_long_all: number,
    pct_of_oi_nonrept_short_all: number,
    pct_of_open_interest_old: number,
    pct_of_oi_noncomm_long_old: number,
    pct_of_oi_noncomm_short_old: number,
    pct_of_oi_noncomm_spread_1: number,
    pct_of_oi_comm_long_old: number,
    pct_of_oi_comm_short_old: number,
    pct_of_oi_tot_rept_long_old: number,
    pct_of_oi_tot_rept_short_1: number,
    pct_of_oi_nonrept_long_old: number,
    pct_of_oi_nonrept_short_old: number,
    pct_of_open_interest_other: number,
    pct_of_oi_noncomm_long_other: number,
    pct_of_oi_noncomm_short_other: number,
    pct_of_oi_noncomm_spread_2: number,
    pct_of_oi_comm_long_other: number,
    pct_of_oi_comm_short_other: number,
    pct_of_oi_tot_rept_long_other: number,
    pct_of_oi_tot_rept_short_2: number,
    pct_of_oi_nonrept_long_other: number,
    pct_of_oi_nonrept_short_other: number,
    traders_tot_all: number,
    traders_noncomm_long_all: number,
    traders_noncomm_short_all: number,
    traders_noncomm_spread_all: number,
    traders_comm_long_all: number,
    traders_comm_short_all: number,
    traders_tot_rept_long_all: number,
    traders_tot_rept_short_all: number,
    traders_tot_old: number,
    traders_noncomm_long_old: number,
    traders_noncomm_short_old: number,
    traders_noncomm_spead_old: number,
    traders_comm_long_old: number,
    traders_comm_short_old: number,
    traders_tot_rept_long_old: number,
    traders_tot_rept_short_old: number,
    traders_tot_other: number,
    traders_noncomm_long_other: number,
    traders_noncomm_short_other: number,
    traders_noncomm_spread_other: number,
    traders_comm_long_other: number,
    traders_comm_short_other: number,
    traders_tot_rept_long_other: number,
    traders_tot_rept_short_other: number,
    conc_gross_le_4_tdr_long: number,
    conc_gross_le_4_tdr_short: number,
    conc_gross_le_8_tdr_long: number,
    conc_gross_le_8_tdr_short: number,
    conc_net_le_4_tdr_long_all: number,
    conc_net_le_4_tdr_short_all: number,
    conc_net_le_8_tdr_long_all: number,
    conc_net_le_8_tdr_short_all: number,
    conc_gross_le_4_tdr_long_1: number,
    conc_gross_le_4_tdr_short_1: number,
    conc_gross_le_8_tdr_long_1: number,
    conc_gross_le_8_tdr_short_1: number,
    conc_net_le_4_tdr_long_old: number,
    conc_net_le_4_tdr_short_old: number,
    conc_net_le_8_tdr_long_old: number,
    conc_net_le_8_tdr_short_old: number,
    conc_gross_le_4_tdr_long_2: number,
    conc_gross_le_4_tdr_short_2: number,
    conc_gross_le_8_tdr_long_2: number,
    conc_gross_le_8_tdr_short_2: number,
    conc_net_le_4_tdr_long_other: number,
    conc_net_le_4_tdr_short_other: number,
    conc_net_le_8_tdr_long_other: number,
    conc_net_le_8_tdr_short_other: number,
};

// Utility for mapping a trader category (like "Dealers") to keys in the objects above.
export interface ITraderCategory<RptType extends ILegacyFuturesCOTReport | IDisaggregatedFuturesCOTReport | IFinancialFuturesCOTReport> {
    // shortName is used for IDs and serialization
    shortName: string,
    // longName is like "Dealers"; this is shown to the user as labels
    longName: string,
    // mapping of key names to something we can use
    keyNames: {
        longPositions: keyof RptType,
        shortPositions: keyof RptType,
        numTraders: keyof RptType,
    },
};